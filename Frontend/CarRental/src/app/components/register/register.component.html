<div class="col-md-3  mx-auto">
    <div class="card card-lg rounded-1">
        <div class="card-header">
            <h3>Register</h3>
        </div>
        <div class="card-body">
            <div *ngIf="registerFailed" class="alert alert-danger">
                {{registerFailedMessage}}
            </div>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <div class="card card-lg rounded-1">
                        <div class="card-body">
                            <h5 class="mx-auto">Personal data</h5>
                            <label for="name">Name</label>
                            <input
                                type="text"
                                class="form-control"
                                id="name"
                                formControlName="name"
                                (change)="resetRegisterStatus()"
                            >
                            <div
                                *ngIf="checkIfErrorsOccurred('name')"
                                class="alert alert-danger"
                            >
                                <div *ngIf="getControlBy('name').hasError('required')">
                                    Name is required.
                                </div>
                                <div *ngIf="getControlBy('name').hasError('fieldTemplate')">
                                    Name must start from capital and contain only latin letters or hyphen in composite
                                    variant.
                                </div>
                            </div>
                            <label class="mt-2" for="surname">Surname</label>
                            <input
                                type="text"
                                class="form-control"
                                id="surname"
                                formControlName="surname"
                                (change)="resetRegisterStatus()"
                            >
                            <div
                                *ngIf="checkIfErrorsOccurred('surname')"
                                class="alert alert-danger"
                            >
                                <div *ngIf="getControlBy('surname').hasError('required')">
                                    Surname is required.
                                </div>
                                <div *ngIf="getControlBy('surname').hasError('fieldTemplate')">
                                    Surname must start from capital and contain only latin letters or hyphen in
                                    composite
                                    variant.
                                </div>
                            </div>
                            <label class="mt-2" for="passportNumber">Passport number</label>
                            <input
                                maxlength="9"
                                type="text"
                                class="form-control"
                                id="passportNumber"
                                formControlName="passportNumber"
                                (change)="resetRegisterStatus()"
                            >
                            <div
                                *ngIf="checkIfErrorsOccurred('passportNumber')"
                                class="alert alert-danger"
                            >
                                <div *ngIf="getControlBy('passportNumber').hasError('required')">
                                    Passport number is required.
                                </div>
                                <div *ngIf="getControlBy('passportNumber').hasError('fieldTemplate')">
                                    Passport number must consist of 2 capitals leading 7 digits.
                                </div>
                            </div>
                            <label class="mt-2" for="driverLicense">Driver license</label>
                            <input
                                maxlength="9"
                                type="text"
                                class="form-control"
                                id="driverLicense"
                                formControlName="driverLicenseSerialNumber"
                                (change)="resetRegisterStatus()"
                            >
                            <div
                                *ngIf="checkIfErrorsOccurred('driverLicenseSerialNumber')"
                                class="alert alert-danger"
                            >
                                <div *ngIf="getControlBy('driverLicenseSerialNumber').hasError('required')">
                                    Driver license is required.
                                </div>
                                <div *ngIf="getControlBy('driverLicenseSerialNumber').hasError('fieldTemplate')">
                                    Driver license must consist of 1 digit leading 2 capitals, followed by 6 digits.
                                </div>
                            </div>
                            <label class="mt-2" for="dateOfBirth">Date of birth</label>
                            <input
                                type="date"
                                class="form-control"
                                id="dateOfBirth"
                                formControlName="dateOfBirth"
                                (change)="resetRegisterStatus()"
                            >
                            <div
                                *ngIf="checkIfErrorsOccurred('dateOfBirth')"
                                class="alert alert-danger"
                            >
                                <div *ngIf="getControlBy('dateOfBirth').hasError('required')">
                                    Date of birth is required.
                                </div>
                                <div *ngIf="getControlBy('dateOfBirth').hasError('minAge')">
                                    Client have to reach {{ minAge }} years.
                                </div>
                            </div>
                        </div>
                    </div>
                    <label class="mt-2" for="email">Email</label>
                    <input
                        type="email"
                        class="form-control"
                        id="email"
                        formControlName="email"
                        (change)="resetRegisterStatus()"
                    >
                    <div
                        *ngIf="checkIfErrorsOccurred('email')"
                        class="alert alert-danger"
                    >
                        <div *ngIf="getControlBy('email').hasError('required')">
                            Email is required.
                        </div>
                        <div *ngIf="getControlBy('email').hasError('minlength')">
                            Email must be at least 3 characters long.
                        </div>
                        <div *ngIf="getControlBy('email').hasError('maxlength')">
                            Email must be maximum 256 characters long.
                        </div>
                        <div *ngIf="getControlBy('email').hasError('fieldTemplate')">
                            Incorrect email format
                        </div>
                    </div>
                    <label class="mt-2" for="username">Username</label>
                    <input
                        type="text"
                        class="form-control"
                        id="username"
                        formControlName="username"
                        (change)="resetRegisterStatus()"
                    >
                    <div
                        *ngIf="checkIfErrorsOccurred('username')"
                        class="alert alert-danger"
                    >
                        <div *ngIf="getControlBy('username').hasError('required')">
                            Username is required.
                        </div>
                        <div *ngIf="getControlBy('username').hasError('maxlength')">
                            Username must be shorter.
                        </div>
                        <div *ngIf="getControlBy('username').hasError('fieldTemplate')">
                            Please, use latin letters, digits and underscores for username.
                        </div>
                    </div>
                    <label class="mt-2" for="password">Password</label>
                    <div class="input-group">
                        <input
                            class="form-control"
                            id="password"
                            formControlName="password"
                            [type]="passwordVisible ? 'text' : 'password'"
                            (change)="resetRegisterStatus()"
                        >
                        <button
                            type="button"
                            class="btn btn-light"
                            id="button-addon2"
                            (click)="changePasswordType()"
                        >
                            {{ passwordVisible ? 'Hide' : 'Show' }}
                        </button>
                    </div>
                    <div
                        *ngIf="checkIfErrorsOccurred('password')"
                        class="alert alert-danger"
                    >
                        <div *ngIf="getControlBy('password').hasError('required')">
                            Password is required.
                        </div>
                        <div *ngIf="getControlBy('password').hasError('minlength')">
                            Password must be at least 5 characters long.
                        </div>
                        <div *ngIf="getControlBy('password').hasError('fieldTemplate')">
                            Password must contain at least 1 digit, 1 lowercase and 1 uppercase.
                        </div>
                    </div>
                </div>
                <button
                    type="button"
                    class="btn btn-success mt-2"
                    [disabled]="registerForm.invalid || registerForm.pristine"
                    (click)="open(content)"
                >
                    Register
                </button>
                <ng-template #content let-modal>
                    <app-registration-modal (submit)="onSubmit()" (close)="modal.close()"></app-registration-modal>
                </ng-template>
            </form>
        </div>
    </div>
</div>